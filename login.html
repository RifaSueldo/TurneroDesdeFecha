
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>TurnoX - Sistema PRE-PAGO de Turnos On Line</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

  <!-- Fuentes -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  

  <!-- Iconos -->
  <link rel="icon" type="image/png" href="https://i.ibb.co/p6Ycq6XC/Turnox-logo.png">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <!-- Open Graph para WhatsApp/Facebook -->
  <meta property="og:title" content=">TurnoX - Sistema PRE-PAGO de Turnos On Line" />
  <meta property="og:description" content="Turnero Pro." />
  <meta property="og:image" content="https://i.ibb.co/p6Ycq6XC/Turnox-logo.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:url" content="https://turnox.pro/" />
  <meta property="og:type" content="website" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="TurnoX - Sistema PRE-PAGO de Turnos On Line" />
  <meta name="twitter:description" content="Turnero Pro." />
  <meta name="twitter:image" content="https://i.ibb.co/p6Ycq6XC/Turnox-logo.png" />
  <style>
    /* Reset y estilos generales */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      font-family: "Montserrat", sans-serif;
  font-optical-sizing: auto;
  font-weight: 400;
  font-style: normal;
      background-color: #533482;
      display: flex;
      justify-content: center;
      align-items: center;
       margin: 0;
      min-height: 100vh; /* ocupa toda la pantalla */
    transition: background-color 1s ease-in-out; /* transiciÃ³n suave del fondo */
    }

    .logo {
  font-size: 3rem;
      font-family: "Montserrat", sans-serif;
  font-optical-sizing: auto;
  font-weight: 700;
  font-style: bold;
      margin-bottom: -2px;
      letter-spacing: -2px; /* valor negativo junta mÃ¡s las letras */
  position: relative;
  display: inline-block;
  color: transparent;
  }
  .logo::before {
    content: "TurnoX";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      120deg,
      transparent,
      rgba(255,255,255,0.9),
      transparent
    );
    background-size: 200% 100%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: shine 5s infinite linear;
  }

@keyframes shine {
  0%   { background-position: 200% 0; }   /* ðŸ‘‰ arranca a la derecha */
  100% { background-position: -200% 0; }  /* ðŸ‘‰ termina a la izquierda */
}



    .subtitle {
      font-size: 0.9rem;
      font-weight: 400;
      margin-bottom: 40px;
      color: #ffffffcc;
    }

    .login-container {
      text-align: center;
      color: #fff;
    }

    
    .login-container label {
      display: block;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .login-container input {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      border: none;
      border-radius: 6px;
      outline: none;
      font-size: 14px;
    }

    .login-container button {
      display: block;
      width: 250px;
      padding: 15px 0;
      margin: 10px auto;
      font-size: 1rem;
      font-weight: 600;
      color: #533482;
      background-color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      text-decoration: none;
      transition: background-color 0.3s, transform 0.2s;
    }

    .login-container button:hover {
      background-color: #f2f2f2;
      transform: translateY(-2px);
    }

    .recuperar {
      margin-top: 15px;
    }

    .recuperar a {
      color: white;
      font-size: 14px;
      text-decoration: none;
    }

    .recuperar a:hover {
      text-decoration: underline;
    }

    /* Div oculto recuperar clave */
    #recuperarDiv {
      margin-top: 20px;
      background: rgba(255,255,255,0.1);
      padding: 15px;
      border-radius: 8px;
    }

    #recuperarDiv input {
      background: white;
      color: black;
      margin-bottom: 10px;
    }

    #recuperarDiv button {
      display: block;
      width: 250px;
      padding: 15px 0;
      margin: 10px auto;
      font-size: 1rem;
      font-weight: 600;
      color: #533482;
      background-color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      text-decoration: none;
      transition: background-color 0.3s, transform 0.2s;
    }
  #recuperarDiv button:hover {
      background-color: #f2f2f2;
      transform: translateY(-2px);
    }
 #toast {
  display: flex; /* lo dejamos flex para centrar el texto siempre */
  opacity: 0; /* invisible al inicio */
  pointer-events: none; /* no bloquea clicks */
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(83, 52, 130, 0.85); /* violeta semitransparente */
  backdrop-filter: blur(5px); /* efecto esmerilado */
  color: white;
  justify-content: center;
  align-items: center;
  font-size: 1.2rem;
  font-weight: 600;
  z-index: 1000;
  text-align: center;
  padding: 20px;
  box-sizing: border-box;
  transition: opacity 0.3s;
}

.spinner {
  display: none;          /* empieza oculto */
  margin: 10px auto;
  width: 30px;
  height: 30px;
  border: 4px solid #fff;       /* color del borde */
  border-top: 4px solid #533482; /* color del giro */
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}


  </style>
</head>
<body>
  <div class="login-container">
    <div class="logo">TurnoX</div>
    <div class="subtitle">www.turnox.pro</div>

    <label for="email">Ingresa a tu cuenta:</label>
    <input type="email" id="email" placeholder="Email">
    <input type="password" id="password" placeholder="ContraseÃ±a">
    <button onclick="login()">Ingresar</button>
    <div class="spinner" id="spinnerIngresar"></div>

    <div class="recuperar">
      <a href="#" onclick="mostrarRecuperar()">Â¿Olvidaste tu contraseÃ±a?</a>
    </div>

    <div id="recuperarDiv" style="display:none;">
      <label for="email">Recupera tu contraseÃ±a:</label>
      <input type="email" id="recuperarEmail" placeholder="Tu email">
      <button onclick="recuperarClave()">Enviar</button>
      <div class="spinner" id="spinnerRecuperar"></div>
    </div>
  </div>
<div id="toast"></div>
  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbyPQ3FCCUIGJPzsC7CepvT9BISkBqL_4exc2-Ukrb1rMX9scdryBvZdjJ11rznkUMvE-A/exec";

    async function login() {
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();

  if (!email || !password) {
    showToast("Por favor, completa todos los campos.");
    return;
  }

  const spinner = document.getElementById("spinnerIngresar");
  spinner.style.display = "block"; // mostramos spinner

  try {
    const res = await fetch(API_URL, {
      method: "POST",
      body: new URLSearchParams({
        action: "login",
        email,
        password
      })
    });
    const data = await res.json();
    spinner.style.display = "none"; // ocultamos spinner

    if (data.status === "ok") {
      // Guardamos en localStorage
      localStorage.setItem("userId", data.userId);
      localStorage.setItem("username", data.username.toLowerCase());

      // Mostramos toast de Ã©xito
      showToast("Â¡Vamos! Bienvenido ðŸ˜Ž");
      setTimeout(() => {
        window.location.href = "/panel.html"; // redirigimos despuÃ©s de 1 seg
      }, 1000);
    } else {
      // Toast de error
      showToast("Â¡UPS! Fijate bien el mail y la clave ðŸ˜…");
    }
  } catch (error) {
    spinner.style.display = "none"; // ocultamos spinner si hay error
    showToast("OcurriÃ³ un error de conexiÃ³n ðŸ˜¢");
    console.error(error);
  }
}

    function mostrarRecuperar(){
  document.getElementById("recuperarDiv").style.display = "block";
}

async function recuperarClave(){
  const email = document.getElementById("recuperarEmail").value.trim();
  if (!email) {
    alert("IngresÃ¡ tu email");
    return;
  }
document.getElementById("spinnerRecuperar").style.display = "block"; // antes de enviar
  const res = await fetch(`${API_URL}`, {
    method: "POST",
    body: new URLSearchParams({
      action: "recoverPassword",
      email: email
    })
  });

  const data = await res.json();
  if (data.status === "ok") {
    document.getElementById("spinnerRecuperar").style.display = "none";  // despuÃ©s de recibir respuesta
  showToast("Te enviamos tu contraseÃ±a al correo ingresado."); 
} else {
  showToast(data.msg || "No encontramos tu email."); 
}
  }
    


function showToast(message) {
  const toast = document.getElementById("toast");
  toast.innerText = message;
  toast.style.opacity = "1";
  toast.style.pointerEvents = "auto"; // ahora sÃ­ puede interactuar si hace falta

  setTimeout(() => {
    toast.style.opacity = "0";
    toast.style.pointerEvents = "none"; // vuelve a no bloquear
  }, 3000);
}

  </script>
</head>

</body>
</html>
